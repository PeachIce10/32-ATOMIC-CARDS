# =========================
#  time.rrule.v1.yaml
# =========================
id              : time.rrule.v1
humanLabel      : Recurring Schedule
category        : DATE_TIME
version         : 1
canBeWrappedBy  : addon.wrapper.v1

layoutTokens:
  minWidthPx          : 320
  breakpointBehaviour : reflow

perfConstraints:
  maxDOMNodes : 140

eventPayload:
  onRuleChanged : { rrule: string }      # full RFC-5545 string

externalFragments:
  - time.rrule.v1.a11y_i18n.yml

faceplates:

  - variantLabel        : Recurrence Builder (Dropdown)
    presentationVariant : rrule-dropdown
    facePlateTokenPrefix: token.rruleDropdown
    userCan: |
      Select frequency (Daily / Weekly / Monthly / Yearly) from a dropdown,
      then tick weekday chips and pick “Every N weeks / months”.
      Resulting rule is returned as an RFC 5545 string.
    customInputs:
      [rruleTemplate, allowFreq, defaultRule, required]
    coversTheseLooks: |
      • Frequency dropdown + weekday chips  
      • “Every N” numeric stepper  
      • Ends: never / after X / on date
    constraints:
      allowFreq : ["DAILY","WEEKLY","MONTHLY","YEARLY"]
    layoutHints: [layout.wizard.pdp.v1]

  - variantLabel        : Recurrence Builder (Inline)
    presentationVariant : rrule-inline
    facePlateTokenPrefix: token.rruleInline
    userCan: |
      Inline pill group for weekdays, plus a small “every N weeks” stepper
      directly in the form (no dropdown).
    customInputs:
      [rruleTemplate, allowFreq, defaultRule, required]
    coversTheseLooks: |
      • Inline weekday chips  
      • Adjacent “every N weeks” numeric
    constraints:
      allowFreq : ["WEEKLY"]           # inline builder fixed to weekly
    layoutHints: [layout.tabs.accordion.toggle.v1]

LAYOUT  : TODO_LATER
RULES:
  emits   : *BaseEmits
  listens : *BaseListens
ACTIONS:
  canTrigger   : *BaseCanTrigger
  postSaveHook : *BasePostSave
ASSETS  : TODO_LATER

CUSTOMER-UI-SNAPSHOT:
  ref : TODO_snapshot

designTokensRef : TODO_token_link
a11yNotes       : {}
analyticsEvents : []
errorStatesRef  : TODO_error_link
i18nNotes       : {}
complianceTags  : []
stateTokensRef  : TODO_state_link