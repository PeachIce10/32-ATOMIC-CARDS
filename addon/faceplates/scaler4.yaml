# =========================
#  subscription.v1.yaml
# =========================
id              : subscription.v1
humanLabel      : Subscription Add-On
category        : ADDON
version         : 1
canBeWrappedBy  : addon.wrapper.v1          # add-on wrapper can price / bundle

# ── 0. Card-wide constraints ────────────────────────────────────
layoutTokens:
  minWidthPx          : 260
  breakpointBehaviour : reflow              # reflow | stack | modal

perfConstraints:
  maxPlanTabs : 6                           # SKU plans shown as tabs

eventPayload:
  onCadenceChanged : { cadence: string }    # weekly | monthly | annual
  onToggle         : { active: bool }

externalFragments:
  - subscription.v1.a11y_i18n.yml

# ── 1. Face-plates (variants) ───────────────────────────────────
faceplates:

  - variantLabel        : Toggle / Checkbox
    presentationVariant : toggle
    facePlateTokenPrefix: token.subscription.toggle
    userCan: |
      Switch the add-on **ON / OFF** with a Checkbox or Toggle.
      When enabled, plan cadence defaults to `cadence` and base fee
      `baseFeeMinor` is shown beneath.
    customInputs:
      [cadence, baseFeeMinor, firstBillDateRule, minTerms, maxTerms,
       priceMinor, linkedProductID, linkedServiceID, required]
    coversTheseLooks: |
      • Standard checkbox with price badge  
      • iOS-style toggle switch  
      • Yes/No pill buttons
    constraints:
      cadence : ["weekly","monthly","annual"]
      minTerms: 1-120
    layoutHints: [layout.wizard.pdp.v1, layout.modal.quickadd.v1]

  - variantLabel        : Plan Tabs
    presentationVariant : plan-tabs
    facePlateTokenPrefix: token.subscription.tabs
    userCan: |
      Select **one** of several subscription plans, each tab labelled
      with cadence and price. First tab may be pre-selected.
    customInputs:
      [cadence, baseFeeMinor, firstBillDateRule, minTerms, maxTerms,
       priceMinor, linkedProductID, linkedServiceID, required]
    coversTheseLooks: |
      • Three-tab strip (Monthly / Quarterly / Annual)  
      • “Most Popular” pill marker on middle tab
    constraints:
      cadence : ["weekly","monthly","annual"]  # one per tab
      maxTabs : 3
    layoutHints: [layout.tabs.accordion.toggle.v1, layout.sitekit.bundle.v1]

# ── 2. Buckets drafted in Pass A (content later) ────────────────
LAYOUT  : TODO_LATER
RULES:
  emits   : *BaseEmits
  listens : *BaseListens
ACTIONS:
  canTrigger   : *BaseCanTrigger
  postSaveHook : *BasePostSave
ASSETS  : TODO_LATER

CUSTOMER-UI-SNAPSHOT:
  ref : TODO_snapshot

# ── 3. Pass-B polish placeholders ───────────────────────────────
designTokensRef : TODO_token_link
a11yNotes       : {}
analyticsEvents : []
errorStatesRef  : TODO_error_link
i18nNotes       : {}
complianceTags  : []
stateTokensRef  : TODO_state_link